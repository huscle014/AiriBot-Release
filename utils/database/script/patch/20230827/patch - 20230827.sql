
-- Add member type into BA_GUILD_MEMBER
ALTER TABLE BA_GUILD_MEMBER ADD COLUMN MEMBER_TYPE VARCHAR(20) DEFAULT 'MEMBER';
UPDATE BA_GUILD_MEMBER SET MEMBER_TYPE = 'MANAGER' WHERE MEMBER_ID IN (311103176835203073, 201245960863481856, 263639126019014657);

-- Update default server language to en_US
CREATE TABLE IF NOT EXISTS `DC_SERVER_SETTING_NEW` (
	`SERVER_ID` INT,
	`LOCALE` VARCHAR(10) DEFAULT 'en_US',
	`EN_DEF_ROLE` INT DEFAULT 0,
	`DEF_ROLE` INT,
	`CREATED_ON` DATETIME,
	`CREATED_BY` VARCHAR(20) DEFAULT CURRENT_TIMESTAMP,
	`UPDATED_ON` DATETIME,
	`UPDATED_BY` VARCHAR(20) DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (`SERVER_ID`)
);

INSERT INTO DC_SERVER_SETTING_NEW (SERVER_ID, LOCALE, EN_DEF_ROLE, DEF_ROLE)
SELECT SERVER_ID, LOCALE, EN_DEF_ROLE, DEF_ROLE
FROM DC_SERVER_SETTING;

DROP TABLE DC_SERVER_SETTING;

ALTER TABLE DC_SERVER_SETTING_NEW RENAME TO DC_SERVER_SETTING;

-- Insert misc mapping
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('INDOOR', '<:ba_indoors_welfare:1138147045601980597>', 'R_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('OUTDOOR', '<:ba_outdoors_welfare:1138146969118838865>', 'R_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('URBAN', '<:ba_urban_welfare:1138146891893317662>', 'R_TYPE');

INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('3', '3 MIN', 'R_TIMING');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('4', '4 MIN', 'R_TIMING');

INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('1', 'Explosive', 'R_ATK_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('2', 'Mystic', 'R_ATK_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('3', 'Piercing', 'R_ATK_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('4', 'Sonic', 'R_ATK_TYPE');

INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('1', 'Normal', 'R_DEF_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('2', 'Light', 'R_DEF_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('3', 'Heavy', 'R_DEF_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('4', 'Special', 'R_DEF_TYPE');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('5', 'Elastic', 'R_DEF_TYPE');

-- Insert raid difficulty
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('1', 'Normal', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('2', 'Hard', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('3', 'VeryHard', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('4', 'Hardcore', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('5', 'Extreme', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('6', 'Insane', 'RAID_DIFFICULTY');
INSERT INTO MISC (NAME, DESCRIPTION, TYPE) VALUES ('7', 'Torment', 'RAID_DIFFICULTY');

-- Insert raid boss details
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Binah', '', '', '3', '3', '3');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Chesed', '', '', '4', '1', '1');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Shiro & Kuro', '', '', '4', '3', '4');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Hieronymus', '', '', '4', '1', '2');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('KAITEN FX Mk.0', '', '', '3', '3', '2');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Perorodzilla', '', '', '4', '2', '3');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Hod', '', '', '4', '2', '3');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Goz', '', '', '4', '1', '4');
INSERT INTO BA_RAID (R_NAME, R_DESCRIPTION, R_TYPE, R_TIMING, R_ATK_TYPE, R_DEF_TYPE)
VALUES ('Gregorio', '', '', '4', '2', '2');

-- patch two column added to club
CREATE TABLE IF NOT EXISTS `BA_GUILD_NEW` (
	`SERVER_ID` INT,
	`GUILD_ID` INT,
	`GUILD_NAME` VARCHAR(100),
	`GUILD_DESCRIPTION` VARCHAR(100),
	`DEFAULT_ROLE` INT DEFAULT 0,
	`RAID_TOP_ROLE` INT DEFAULT 0,
	`RAID_THRESHOLD` INT DEFAULT 0,
	`CONFIGURED_BY` INT,
	`CREATED_ON` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`CREATED_BY` VARCHAR(20),
	`UPDATED_ON` DATETIME DEFAULT CURRENT_TIMESTAMP,
	`UPDATED_BY` VARCHAR(20),
	PRIMARY KEY (`SERVER_ID`,`GUILD_ID`),
	UNIQUE (`SERVER_ID`,`GUILD_ID`)
);

INSERT INTO BA_GUILD_NEW (SERVER_ID, GUILD_ID, GUILD_NAME, GUILD_DESCRIPTION, DEFAULT_ROLE, CONFIGURED_BY, CREATED_ON, CREATED_BY, UPDATED_ON, UPDATED_BY)
SELECT SERVER_ID, GUILD_ID, GUILD_NAME, GUILD_DESCRIPTION, DEFAULT_ROLE, CONFIGURED_BY, CREATED_ON, CREATED_BY, UPDATED_ON, UPDATED_BY
FROM BA_GUILD;

DROP TABLE BA_GUILD;

ALTER TABLE BA_GUILD_NEW RENAME TO BA_GUILD;

-- Add bond level
ALTER TABLE BA_MEMBER_STUDENTS ADD COLUMN BOND INTEGER DEFAULT 1;

-- Add  friend code
ALTER TABLE BA_GUILD_MEMBER ADD COLUMN MEMBER_FRIEND_CODE VARCHAR(100);

-- Server setting
INSERT OR REPLACE INTO DC_SERVER(SERVER_ID,SERVER_NAME) VALUES('361709581786808320','ABC GROUP');
INSERT OR REPLACE INTO DC_SERVER_SETTING(SERVER_ID,LOCALE,EN_DEF_ROLE) VALUES('361709581786808320','en_US','0');
INSERT OR REPLACE INTO DC_SERVER(SERVER_ID,SERVER_NAME) VALUES('910191420244127765','Chronos');
INSERT OR REPLACE INTO DC_SERVER_SETTING(SERVER_ID,LOCALE,EN_DEF_ROLE) VALUES('910191420244127765','zh_TW','0');
INSERT OR REPLACE INTO DC_SERVER(SERVER_ID,SERVER_NAME) VALUES('1065167797140856832','怎麽想還是得測試一下DC功能');
INSERT OR REPLACE INTO DC_SERVER_SETTING(SERVER_ID,LOCALE,EN_DEF_ROLE) VALUES('1065167797140856832','en_US','0');
INSERT OR REPLACE INTO DC_SERVER(SERVER_ID,SERVER_NAME) VALUES('1123285928757166110','桃井愛莉の秘密基地');
INSERT OR REPLACE INTO DC_SERVER_SETTING(SERVER_ID,LOCALE,EN_DEF_ROLE) VALUES('1123285928757166110','en_US','0');
INSERT OR REPLACE INTO DC_SERVER(SERVER_ID,SERVER_NAME) VALUES('1136564960932151377','AiriBot Metadata');
INSERT OR REPLACE INTO DC_SERVER_SETTING(SERVER_ID,LOCALE,EN_DEF_ROLE) VALUES('1136564960932151377','en_US','0');

-- Raid score migration
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('201245960863481856', '43', '287', '25999036', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('201245960863481856', '44', '2272', '24825700', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('591312544912769058', '43', '166', '26074982', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('591312544912769058', '44', '107', '25883835', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('513938506670800945', '43', '1418', '25764795', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('513938506670800945', '44', '410', '25598395', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('950605790434197605', '43', '124', '26101436', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('950605790434197605', '44', '110', '25881275', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('311103176835203073', '43', '220', '26031462', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('311103176835203073', '44', '2320', '24795833', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('343044615030571008', '43', '757', '25846715', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('343044615030571008', '44', '1666', '25018127', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('325628646813335552', '43', '78', '26131303', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('325628646813335552', '44', '270', '25712742', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('449764313750568980', '43', '171', '26071996', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('449764313750568980', '44', '222', '25757542', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('263639126019014657', '43', '52', '26156903', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('263639126019014657', '44', '10', '26066449', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('695058700137922640', '43', '5263', '25210554', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('695058700137922640', '44', '3305', '24387939', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('689720323242983435', '43', '51', '26157329', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('689720323242983435', '44', '164', '25816422', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('121230455138811904', '43', '1', '26524831', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('121230455138811904', '44', '13', '26054076', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('224127765543124992', '43', '986', '25820262', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('224127765543124992', '44', '328', '25659408', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('450890443320852480', '44', '82', '25914982', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('926354348253011989', '44', '183', '25797222', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('208563725475512322', '44', '1259', '25150821', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('215697491109085184', '44', '261', '25720422', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('224169611925389313', '44', '194', '25783569', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('256410975509413890', '44', '3427', '24341006', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('1105105334269386903', '44', '1185', '25179407', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('708673747057377402', '44', '103', '25891942', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('104209644724957184', '44', '5510', '23477010', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('345753959153008641', '44', '12', '26065169', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('223990244276568065', '44', '205', '25776315', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('298997231128936451', '44', '4424', '24039352', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('297942238842060800', '44', '1457', '25082980', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('370272963301343234', '44', '8184', '14610345', '5');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('495632620592300072', '44', '4411', '24046611', '6');
INSERT INTO BA_RAID_MEMBER (MEMBER_ID, RE_ID, RE_RANK, RE_SCORE, RE_DIFFICULTY) VALUES ('721221182736564275', '44', '4988', '23836685', '6');